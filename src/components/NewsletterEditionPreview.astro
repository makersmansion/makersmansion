---
import { Image } from "astro:assets"
import { resolveCoverImage } from "~/content/newsletter/_resolveImage.js"
import { format } from "date-fns"

export type Props = {
  edition: {
    slug: string
    data: {
      title: string
      publishDate: Date
      coverImage: string
    }
  }
}
const { edition } = Astro.props

const image = await resolveCoverImage(edition)
---

<article class="@container">
  <a
    href={`/newsletter/${edition.slug}/`}
    data-astro-prefetch
    class="group flex h-full flex-col items-start gap-3 transition-colors @md:flex-row @md:gap-6">
    <figure class="overflow-hidden rounded-xl @md:w-1/5 @md:rounded-md">
      <Image
        src={image}
        alt={edition.data.title}
        width={image.width}
        height={image.height}
        class="aspect-video object-cover"
      />
    </figure>
    <div class="flex-1 px-2 @md:px-0">
      <h3 class="text-lg/snug font-bold [text-wrap:pretty] group-hover:text-primary-500">
        {edition.data.title}
      </h3>
      <p class="mt-1 leading-6 text-neutral-700 [text-wrap:pretty] dark:text-neutral-400">
        <time datetime={edition.data.publishDate.toISOString()}
          >{format(edition.data.publishDate, "d MMM yyyy")}</time
        >
      </p>
    </div>
  </a>
</article>
